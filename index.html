<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì˜ì–´ ë‹¨ì–´ í•™ìŠµ ê²Œì„</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f3f4f6;
    }

    .game-wrapper {
      width: 100%;
      max-width: 480px;
      padding: 20px;
    }

    .card {
      background: #ffffff;
      border-radius: 18px;
      padding: 24px 20px 20px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.06);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .title {
      font-size: 20px;
      font-weight: 700;
    }

    .badge {
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 999px;
      background: #eef2ff;
      color: #4f46e5;
      font-weight: 600;
    }

    .status-bar {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
      font-size: 13px;
      color: #4b5563;
    }

    .status-bar span strong {
      font-weight: 700;
      color: #111827;
    }

    .progress-track {
      width: 100%;
      height: 6px;
      background: #e5e7eb;
      border-radius: 999px;
      overflow: hidden;
      margin-bottom: 20px;
    }

    .progress-fill {
      height: 100%;
      width: 0;
      background: linear-gradient(90deg, #4f46e5, #6366f1);
      transition: width 0.3s ease;
    }

    .question-box {
      background: #f9fafb;
      border-radius: 14px;
      padding: 16px;
      margin-bottom: 18px;
    }

    .question-label {
      font-size: 12px;
      color: #6b7280;
      margin-bottom: 4px;
    }

    .question-text {
      font-size: 22px;
      font-weight: 700;
      color: #111827;
    }

    .hint-text {
      margin-top: 6px;
      font-size: 12px;
      color: #9ca3af;
    }

    .choices {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-bottom: 16px;
    }

    .choice-btn {
      width: 100%;
      padding: 11px 12px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #ffffff;
      text-align: left;
      font-size: 15px;
      cursor: pointer;
      transition: transform 0.08s ease, box-shadow 0.08s ease, border-color 0.1s ease, background 0.1s ease;
    }

    .choice-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.05);
    }

    .choice-btn.correct {
      background: #dcfce7;
      border-color: #34d399;
    }

    .choice-btn.wrong {
      background: #fee2e2;
      border-color: #f97373;
    }

    .bottom-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 4px;
    }

    .message {
      font-size: 14px;
      min-height: 18px;
    }

    .message.correct {
      color: #16a34a;
    }

    .message.wrong {
      color: #dc2626;
    }

    .primary-btn {
      border: none;
      border-radius: 999px;
      padding: 9px 16px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      background: #4f46e5;
      color: white;
      box-shadow: 0 6px 16px rgba(79, 70, 229, 0.35);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.1s ease;
    }

    .primary-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 20px rgba(79, 70, 229, 0.4);
      background: #4338ca;
    }

    .primary-btn:disabled {
      opacity: 0.5;
      cursor: default;
      transform: none;
      box-shadow: none;
    }

    .small-text {
      margin-top: 8px;
      font-size: 11px;
      color: #9ca3af;
      text-align: right;
    }

    .game-over {
      text-align: center;
      margin-top: 10px;
      font-size: 14px;
      color: #374151;
    }

    .game-over strong {
      display: block;
      margin-bottom: 4px;
      font-size: 16px;
    }

    @media (min-width: 640px) {
      .card {
        padding: 26px 24px 22px;
      }
    }
  </style>
</head>
<body>
  <div class="game-wrapper">
    <div class="card">
      <div class="card-header">
        <div class="title">ì˜ì–´ ë‹¨ì–´ í€´ì¦ˆ</div>
        <div class="badge">ê¸°ë³¸ ë ˆë²¨</div>
      </div>

      <div class="status-bar">
        <span>ì ìˆ˜: <strong id="score">0</strong></span>
        <span>ë¬¸ì œ: <strong id="questionCount">0</strong></span>
        <span>ê¸°íšŒ: <strong id="lives">3</strong></span>
      </div>

      <div class="progress-track">
        <div class="progress-fill" id="progressFill"></div>
      </div>

      <div class="question-box">
        <div class="question-label">ë‹¤ìŒ ëœ»ì— í•´ë‹¹í•˜ëŠ” ì˜ì–´ ë‹¨ì–´ëŠ”?</div>
        <div class="question-text" id="koreanMeaning">ì‹œì‘í•˜ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”</div>
        <div class="hint-text" id="hintText"></div>
      </div>

      <div class="choices" id="choices">
        <!-- ì„ íƒì§€ê°€ JSë¡œ ìƒì„±ë¨ -->
      </div>

      <div class="bottom-bar">
        <div class="message" id="message"></div>
        <button class="primary-btn" id="nextBtn">
          <span id="nextBtnText">ì‹œì‘í•˜ê¸°</span>
        </button>
      </div>

      <div class="game-over" id="gameOver" style="display: none;">
        <strong>ê²Œì„ ì¢…ë£Œ!</strong>
        <span id="finalScoreText"></span><br />
        ë‹¤ì‹œ ì‹œì‘í•˜ë ¤ë©´ &quot;ë‹¤ìŒ ë¬¸ì œ&quot; ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.
      </div>

      <div class="small-text">
        ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸ëŠ” ì½”ë“œ ë§¨ ì•„ë˜ì—ì„œ ì§ì ‘ ìˆ˜ì •í•  ìˆ˜ ìˆì–´ìš”.
      </div>
    </div>
  </div>

  <script>
    // ---- 1. ë‹¨ì–´ ë°ì´í„° ----
    // í•„ìš”ì— ë”°ë¼ ë‹¨ì–´ë¥¼ ì¶”ê°€/ìˆ˜ì •í•˜ë©´ ë¨
    const WORDS = [
      { en: "apple", ko: "ì‚¬ê³¼", hint: "ê³¼ì¼" },
      { en: "book", ko: "ì±…", hint: "ì½ëŠ” ê²ƒ" },
      { en: "teacher", ko: "ì„ ìƒë‹˜", hint: "í•™êµ ì‚¬ëŒ" },
      { en: "student", ko: "í•™ìƒ", hint: "ê³µë¶€í•˜ëŠ” ì‚¬ëŒ" },
      { en: "computer", ko: "ì»´í“¨í„°", hint: "ì „ì ê¸°ê¸°" },
      { en: "window", ko: "ì°½ë¬¸", hint: "ë¹›ì´ ë“¤ì–´ì˜¤ëŠ” ê³³" },
      { en: "music", ko: "ìŒì•…", hint: "ë“£ëŠ” ì˜ˆìˆ " },
      { en: "family", ko: "ê°€ì¡±", hint: "ê°€ì¥ ê°€ê¹Œìš´ ì‚¬ëŒë“¤" },
      { en: "water", ko: "ë¬¼", hint: "ë§ˆì‹œëŠ” ê²ƒ" },
      { en: "city", ko: "ë„ì‹œ", hint: "ë§ì€ ì‚¬ëŒì´ ì‚¬ëŠ” ê³³" },
      { en: "movie", ko: "ì˜í™”", hint: "ìŠ¤í¬ë¦°ì—ì„œ ë³´ëŠ” ì´ì•¼ê¸°" },
      { en: "friend", ko: "ì¹œêµ¬", hint: "í•¨ê»˜ ë…¸ëŠ” ì‚¬ëŒ" },
      { en: "homework", ko: "ìˆ™ì œ", hint: "ì§‘ì—ì„œ í•˜ëŠ” ê³µë¶€" },
      { en: "coffee", ko: "ì»¤í”¼", hint: "ì–´ë¥¸ë“¤ì´ ìì£¼ ë§ˆì‹œëŠ” ìŒë£Œ" },
      { en: "morning", ko: "ì•„ì¹¨", hint: "í•˜ë£¨ì˜ ì‹œì‘" },
    ];

    // ---- 2. DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸° ----
    const koreanMeaningEl = document.getElementById("koreanMeaning");
    const hintTextEl = document.getElementById("hintText");
    const choicesEl = document.getElementById("choices");
    const messageEl = document.getElementById("message");
    const scoreEl = document.getElementById("score");
    const livesEl = document.getElementById("lives");
    const questionCountEl = document.getElementById("questionCount");
    const nextBtn = document.getElementById("nextBtn");
    const nextBtnText = document.getElementById("nextBtnText");
    const gameOverEl = document.getElementById("gameOver");
    const finalScoreTextEl = document.getElementById("finalScoreText");
    const progressFillEl = document.getElementById("progressFill");

    // ---- 3. ê²Œì„ ìƒíƒœ ----
    let score = 0;
    let lives = 3;
    let questionCount = 0;
    let currentAnswer = null;
    let acceptingAnswer = false; // ì¤‘ë³µ í´ë¦­ ë°©ì§€
    const MAX_QUESTIONS_FOR_PROGRESS = 20; // ì§„í–‰ë„ ë°” ê¸°ì¤€

    // ---- 4. ìœ í‹¸ í•¨ìˆ˜ ----
    function shuffle(array) {
      const arr = [...array];
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function updateStatusBar() {
      scoreEl.textContent = score;
      livesEl.textContent = lives;
      questionCountEl.textContent = questionCount;
      const progress = Math.min(questionCount / MAX_QUESTIONS_FOR_PROGRESS, 1);
      progressFillEl.style.width = (progress * 100).toFixed(0) + "%";
    }

    function resetChoiceStyles() {
      const buttons = choicesEl.querySelectorAll(".choice-btn");
      buttons.forEach((btn) => {
        btn.classList.remove("correct", "wrong");
        btn.disabled = false;
      });
    }

    function showGameOver() {
      gameOverEl.style.display = "block";
      finalScoreTextEl.textContent = `ìµœì¢… ì ìˆ˜: ${score}ì  / ì´ ë¬¸ì œ ${questionCount}ê°œ`;
      koreanMeaningEl.textContent = "ê²Œì„ì´ ëë‚¬ì–´ìš”!";
      hintTextEl.textContent = "";
      choicesEl.innerHTML = "";
      nextBtnText.textContent = "ë‹¤ì‹œ ì‹œì‘";
      acceptingAnswer = false;
    }

    // ---- 5. ìƒˆ ë¬¸ì œ ìƒì„± ----
    function generateQuestion() {
      // ë¼ì´í”„ê°€ 0ì´ë©´ ê²Œì„ ì¢…ë£Œ
      if (lives <= 0) {
        showGameOver();
        return;
      }

      gameOverEl.style.display = "none";
      messageEl.textContent = "";
      messageEl.className = "message";

      resetChoiceStyles();
      choicesEl.innerHTML = "";

      // ì •ë‹µ ë‹¨ì–´ í•˜ë‚˜ ë½‘ê¸°
      const correctWord = WORDS[Math.floor(Math.random() * WORDS.length)];
      currentAnswer = correctWord.en;

      koreanMeaningEl.textContent = correctWord.ko;
      hintTextEl.textContent = correctWord.hint ? `íŒíŠ¸: ${correctWord.hint}` : "";

      // ë³´ê¸°ìš© ë‹¨ì–´ 3ê°œ ì¶”ê°€ë¡œ ë½‘ê¸° (ê²¹ì¹˜ì§€ ì•Šê²Œ)
      const wrongCandidates = WORDS.filter(w => w.en !== correctWord.en);
      const shuffledWrong = shuffle(wrongCandidates).slice(0, 3);

      const options = shuffle([correctWord, ...shuffledWrong]);

      options.forEach((word) => {
        const btn = document.createElement("button");
        btn.className = "choice-btn";
        btn.textContent = word.en;
        btn.addEventListener("click", () => handleChoice(word.en, btn));
        choicesEl.appendChild(btn);
      });

      questionCount++;
      updateStatusBar();
      nextBtn.disabled = true;
      nextBtnText.textContent = "ì •ë‹µ ì„ íƒ";
      acceptingAnswer = true;
    }

    // ---- 6. ì‚¬ìš©ìê°€ ì„ íƒí–ˆì„ ë•Œ ----
    function handleChoice(selected, buttonEl) {
      if (!acceptingAnswer) return;
      acceptingAnswer = false;

      const buttons = choicesEl.querySelectorAll(".choice-btn");
      buttons.forEach((btn) => (btn.disabled = true));

      if (selected === currentAnswer) {
        // ì •ë‹µ
        score++;
        messageEl.textContent = "ì •ë‹µ! ì˜í–ˆì–´ìš” ğŸ‘";
        messageEl.className = "message correct";
        buttonEl.classList.add("correct");
      } else {
        // ì˜¤ë‹µ
        lives--;
        messageEl.textContent = `ì•„ì‰¬ì›Œìš”. ì •ë‹µì€ "${currentAnswer}" ì…ë‹ˆë‹¤.`;
        messageEl.className = "message wrong";
        buttonEl.classList.add("wrong");

        // ì •ë‹µ ë²„íŠ¼ë„ í‘œì‹œ
        buttons.forEach((btn) => {
          if (btn.textContent === currentAnswer) {
            btn.classList.add("correct");
          }
        });
      }

      updateStatusBar();

      if (lives <= 0) {
        // ì¡°ê¸ˆ ê¸°ë‹¤ë ¸ë‹¤ê°€ ê²Œì„ì˜¤ë²„ í‘œì‹œ
        setTimeout(showGameOver, 600);
      }

      nextBtn.disabled = false;
      nextBtnText.textContent = "ë‹¤ìŒ ë¬¸ì œ";
    }

    // ---- 7. ì‹œì‘/ë‹¤ìŒ ë²„íŠ¼ ----
    nextBtn.addEventListener("click", () => {
      if (lives <= 0 && questionCount > 0) {
        // ê²Œì„ ë‹¤ì‹œ ì‹œì‘
        score = 0;
        lives = 3;
        questionCount = 0;
        updateStatusBar();
      }
      generateQuestion();
    });

    // ì´ˆê¸° ìƒíƒœ í‘œì‹œ
    updateStatusBar();
  </script>
</body>
</html>
